<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Personal Healthcare Assistant — Dashboard</title>
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root{--accent:#3b82f6;--muted:#6b7280;--card:#ffffffcc}
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{margin:0;min-height:100vh;background-image:linear-gradient(rgba(8,10,20,0.55),rgba(8,10,20,0.55)),url('https://images.unsplash.com/photo-1588776814546-1c3f6c6c7f20?q=80&w=1920&auto=format&fit=crop&ixlib=rb-4.0.3&s=');background-size:cover;background-position:center;color:#0f172a}
    .app{display:grid;grid-template-columns:260px 1fr;gap:24px;padding:28px}

    /* Sidebar */
    .sidebar{background:linear-gradient(180deg,rgba(255,255,255,0.06),rgba(255,255,255,0.02));backdrop-filter:blur(6px);border-radius:14px;padding:18px;height:calc(100vh - 56px);overflow:auto;color:#f8fafc}
    .logo{font-weight:700;font-size:18px;margin-bottom:18px;color:white}
    .nav{display:flex;flex-direction:column;gap:8px}
    .nav button{background:transparent;color:#e6eef8;border:0;padding:10px 12px;border-radius:8px;text-align:left;cursor:pointer}
    .nav button:hover{background:rgba(255,255,255,0.06)}

    /* Main */
    .main{padding:6px}
    .header{display:flex;align-items:center;justify-content:space-between;color:white;margin-bottom:18px}
    .search{display:flex;gap:12px;align-items:center}
    .card-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-bottom:18px}
    .card{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.24)}
    h3{margin:0 0 8px 0}
    p.small{margin:0;color:var(--muted);font-size:13px}

    /* Patient list & controls */
    .layout{display:grid;grid-template-columns:1fr 420px;gap:18px}
    .patient-list{display:flex;flex-direction:column;gap:12px}
    .patient{display:flex;gap:12px;align-items:center;padding:10px;border-radius:10px;background:linear-gradient(180deg,#fff, #f7fbff);cursor:pointer}
    .patient img{width:56px;height:56px;border-radius:10px;object-fit:cover}
    .patient .meta{flex:1}
    .patient .meta b{display:block}
    .patient:hover{transform:translateY(-4px);transition:all .18s ease}

    /* Form */
    form{display:flex;flex-direction:column;gap:10px}
    label{font-size:13px;color:#0f172a}
    input,select,textarea{padding:8px;border-radius:8px;border:1px solid #d1d5db}
    .btn{padding:10px 12px;border-radius:10px;border:0;cursor:pointer;background:var(--accent);color:white}

    /* rollover info */
    .info-hover{position:relative}
    .info-hover .tip{position:absolute;left:0;top:calc(100% + 8px);width:260px;background:white;padding:12px;border-radius:8px;box-shadow:0 8px 20px rgba(2,6,23,0.16);opacity:0;transform:translateY(6px);transition:all .16s ease;pointer-events:none}
    .info-hover:hover .tip{opacity:1;transform:translateY(0);pointer-events:auto}

    /* responsive */
    @media (max-width:1000px){.app{grid-template-columns:1fr;padding:18px}.card-grid{grid-template-columns:repeat(2,1fr)}.layout{grid-template-columns:1fr} .sidebar{height:auto}}
    @media (max-width:640px){.card-grid{grid-template-columns:1fr}}

    footer{color:#cbd5e1;margin-top:18px;font-size:13px}
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="logo">PHA • Personal Healthcare Assistant</div>
      <nav class="nav">
        <button onclick="showPanel('overview')">Overview</button>
        <button onclick="showPanel('pregnancy')">Pregnancy Care</button>
        <button onclick="showPanel('chronic')">Tumor / Diabetes</button>
        <button onclick="showPanel('patients')">Patients</button>
        <button onclick="showPanel('settings')">Settings</button>
      </nav>
      <hr style="margin:14px 0;border:0;border-top:1px solid rgba(255,255,255,0.06)">
      <div style="color:#cbd5e1;font-size:13px">Quick actions</div>
      <div style="display:flex;gap:8px;margin-top:10px">
        <button class="btn" onclick="newPatient()">+ New Patient</button>
        <button class="btn" style="background:#10b981" onclick="importSample()">Import Sample</button>
      </div>
      <footer>Built for demo • shows sample prescriptions and interactive charts</footer>
    </aside>

    <main class="main">
      <div class="header">
        <div>
          <h1 style="color:white;margin:0">Dashboard</h1>
          <p class="small">Manage prescriptions, dietary guidance and chronic care insights</p>
        </div>
        <div class="search">
          <input placeholder="Search patient or medication" style="padding:10px;border-radius:10px;border:0;min-width:240px">
          <div style="color:white">Welcome, Clinician</div>
        </div>
      </div>

      <section class="card-grid" id="overview">
        <div class="card">
          <h3>Pregnancy: Active Cases</h3>
          <p class="small">Patients currently under prenatal monitoring</p>
          <div style="margin-top:12px;display:flex;align-items:center;gap:12px">
            <div style="font-size:22px;font-weight:700">6</div>
            <div style="flex:1">
              <div class="info-hover">
                <div style="font-size:13px">Hover for dietary tip</div>
                <div class="tip">
                  <strong>Iron Booster Snack</strong>
                  <p style="margin:6px 0 0 0;font-size:13px">Pair spinach & lentil soup with orange slices to enhance iron absorption (vitamin C).</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <h3>Chronic Care: Diabetes</h3>
          <p class="small">Monitored patients & latest average glucose</p>
          <div style="display:flex;align-items:center;gap:12px;margin-top:10px">
            <div style="font-size:22px;font-weight:700">12</div>
            <div style="flex:1"><canvas id="miniGlucose" height="60"></canvas></div>
          </div>
        </div>

        <div class="card">
          <h3>Tumor Cases</h3>
          <p class="small">Patients with oncology prescriptions</p>
          <div style="display:flex;align-items:center;gap:12px;margin-top:10px">
            <div style="font-size:22px;font-weight:700">4</div>
            <div style="flex:1">
              <div class="info-hover">
                <div style="font-size:13px">Hover for symptom checklist</div>
                <div class="tip">
                  <strong>Red flag symptoms</strong>
                  <ul style="margin:6px 0 0 16px;font-size:13px"><li>Unexplained weight loss</li><li>Persistent pain</li><li>New lumps</li></ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <div class="layout">
        <section style="background:transparent">
          <div class="card" style="margin-bottom:18px">
            <h3>Patient Directory</h3>
            <div class="patient-list" id="patientList">
              <!-- sample patients populated by JS -->
            </div>
          </div>

          <div class="card">
            <h3>Glucose Trend (Sample)</h3>
            <canvas id="glucoseChart" height="160"></canvas>
          </div>
        </section>

        <aside>
          <div class="card">
            <h3 id="panelTitle">Prescription / Diet Editor</h3>
            <form id="prescriptionForm" onsubmit="return savePrescription(event)">
              <label>Patient</label>
              <select id="patientSelect"></select>

              <label>Condition</label>
              <select id="conditionSelect" onchange="conditionChanged()">
                <option value="pregnancy">Pregnancy — Dietary & Supplements</option>
                <option value="diabetes">Diabetes — Antidiabetics</option>
                <option value="tumor">Tumor — Oncology Support</option>
              </select>

              <label>Prescription / Notes</label>
              <textarea id="prescriptionText" rows="4" placeholder="e.g. Folic acid 400 mcg daily; Iron 30 mg daily; Diet: +protein, +iron-rich foods"></textarea>

              <label>Diet Recommendation (use rollover for tips)</label>
              <div class="info-hover">
                <input id="dietInput" placeholder="e.g. 2000 kcal, protein 75g/day" />
                <div class="tip"><strong>Pregnancy tip:</strong><p style="margin:6px 0 0 0">Aim for an extra ~300 kcal/day in 2nd/3rd trimester and 25–35 g protein/day above baseline; check folate & iron.</p></div>
              </div>

              <div style="display:flex;gap:8px;margin-top:10px">
                <button class="btn" type="submit">Save</button>
                <button type="button" onclick="previewPrescription()" style="padding:10px;border-radius:10px;border:1px solid #cbd5e1;background:white;">Preview</button>
              </div>
            </form>
            <div id="previewBox" style="margin-top:12px;display:none"></div>
          </div>

          <div class="card" style="margin-top:12px">
            <h3>Diet Breakdown</h3>
            <canvas id="dietPie" height="200"></canvas>
          </div>
        </aside>
      </div>

      <footer>Data in this demo is fictional. Always cross-check with clinical guidelines.</footer>
    </main>
  </div>

  <script>
    // Sample data
    const patients = [
      {id:1,name:'Asha R.',age:28,cond:'pregnancy',img:'https://randomuser.me/api/portraits/women/68.jpg'},
      {id:2,name:'Ravi K.',age:55,cond:'diabetes',img:'https://randomuser.me/api/portraits/men/45.jpg'},
      {id:3,name:'Meera S.',age:33,cond:'tumor',img:'https://randomuser.me/api/portraits/women/66.jpg'},
      {id:4,name:'Sunil P.',age:60,cond:'diabetes',img:'https://randomuser.me/api/portraits/men/66.jpg'}
    ];

    function renderPatients(){
      const el = document.getElementById('patientList');el.innerHTML='';
      const sel = document.getElementById('patientSelect');sel.innerHTML='';
      patients.forEach(p=>{
        const div = document.createElement('div');div.className='patient';div.innerHTML=`<img src="${p.img}" alt="${p.name}"><div class=meta><b>${p.name}</b><span style=font-size:13px;color:#374151>${p.cond} • Age ${p.age}</span></div>`;
        div.onclick = ()=>selectPatient(p.id);
        el.appendChild(div);
        const opt = document.createElement('option');opt.value=p.id;opt.textContent=p.name;sel.appendChild(opt);
      })
    }

    function selectPatient(id){
      const p = patients.find(x=>x.id==id);
      if(!p) return; document.getElementById('panelTitle').textContent = `Edit: ${p.name}`; document.getElementById('patientSelect').value = p.id; document.getElementById('conditionSelect').value = p.cond;
      document.getElementById('prescriptionText').value = defaultPrescriptionFor(p.cond);
      document.getElementById('dietInput').value = defaultDietFor(p.cond);
      window.scrollTo({top:0,behavior:'smooth'});
    }

    function defaultPrescriptionFor(cond){
      if(cond==='pregnancy') return 'Folic acid 400 mcg daily; Iron 30 mg daily; Calcium 1000 mg at bedtime; Encourage balanced meals & prenatal multivitamin.';
      if(cond==='diabetes') return 'Metformin 500 mg twice daily (as tolerated); Monitor fasting glucose daily; Diet: low glycemic index carbohydrate distribution.';
      if(cond==='tumor') return 'Symptom control: antiemetic PRN, nutrition support; discuss chemo/RT with oncology team; consider high-protein diet.';
      return '';
    }
    function defaultDietFor(cond){
      if(cond==='pregnancy') return 'Approx. +300 kcal/day, iron-rich foods, folate-rich vegetables, protein 75g/day';
      if(cond==='diabetes') return 'Carb counting, 45-50% carbs from low GI sources, moderate protein, avoid simple sugars';
      if(cond==='tumor') return 'High protein, small frequent meals, consider oral supplements if appetite low';
      return '';
    }

    function newPatient(){
      const id = patients.length+1; patients.push({id,name:`New Patient ${id}`,age:30,cond:'pregnancy',img:'https://randomuser.me/api/portraits/lego/2.jpg'}); renderPatients(); selectPatient(id);
    }

    function importSample(){
      alert('Sample data already present in demo. Select a patient to edit.');
    }

    function savePrescription(e){
      e.preventDefault(); const pid = +document.getElementById('patientSelect').value; const text = document.getElementById('prescriptionText').value; const diet = document.getElementById('dietInput').value; alert('Saved for patient id '+pid+'\nNotes:\n'+text+'\nDiet: '+diet); return false;
    }

    function previewPrescription(){
      const name = document.getElementById('patientSelect').selectedOptions[0].text; const cond = document.getElementById('conditionSelect').value; const text = document.getElementById('prescriptionText').value; const diet = document.getElementById('dietInput').value; const box = document.getElementById('previewBox'); box.style.display='block'; box.innerHTML = `<div style="padding:10px;border-radius:8px;background:#f8fafc"><strong>${name} — ${cond}</strong><p style="margin:6px 0 0 0">${text}</p><p style="margin:6px 0 0 0"><em>Diet:</em> ${diet}</p></div>`;
    }

    function conditionChanged(){
      const cond = document.getElementById('conditionSelect').value; document.getElementById('prescriptionText').value = defaultPrescriptionFor(cond); document.getElementById('dietInput').value = defaultDietFor(cond);
    }

    // Charts
    function makeMiniGlucose(){
      const ctx = document.getElementById('miniGlucose').getContext('2d'); new Chart(ctx,{type:'line',data:{labels:['Mon','Tue','Wed','Thu','Fri','Sat'],datasets:[{label:'Avg mg/dL',data:[110,118,115,122,117,113],fill:true,tension:0.4,pointRadius:0}]},options:{plugins:{legend:{display:false}},scales:{y:{display:false},x:{display:false}},elements:{line:{borderColor:'#ef4444',backgroundColor:'rgba(239,68,68,0.12)'}}})
    }

    function makeGlucoseChart(){
      const ctx = document.getElementById('glucoseChart').getContext('2d'); window.glucoseChart = new Chart(ctx,{type:'line',data:{labels:['Day -6','-5','-4','-3','-2','-1','Today'],datasets:[{label:'Fasting glucose',data:[130,128,125,120,118,115,112],borderWidth:2,tension:0.3,pointBackgroundColor:'#111827'}]},options:{plugins:{legend:{display:true}},scales:{y:{title:{display:true,text:'mg/dL'}},x:{title:{display:true,text:'Date'}}}})
    }

    function makeDietPie(){
      const ctx = document.getElementById('dietPie').getContext('2d'); new Chart(ctx,{type:'pie',data:{labels:['Carbs','Protein','Fats','Fiber'],datasets:[{data:[50,25,20,5]}]},options:{plugins:{legend:{position:'bottom'}}})
    }

    function showPanel(id){
      document.querySelectorAll('section.card-grid, section, .layout').forEach(n=>n.style.display='block');
      // simple single-page anchor: could expand to hide/show subsections
      window.scrollTo({top:0,behavior:'smooth'});
    }

    // init
    renderPatients(); makeMiniGlucose(); makeGlucoseChart(); makeDietPie(); selectPatient(1);
  </script>
</body>
</html>
