<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Personal Healthcare Assistant — Dashboard</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer"/>

  <style>
    :root{--accent:#0ea5a4;--muted:#6b7280;--bg:#f8fafc}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;margin:0;background:var(--bg);color:#04202b}
    .wrap{max-width:1200px;margin:20px auto;padding:16px}
    header{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#4f46e5);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    .grid{display:grid;grid-template-columns:1fr 420px;gap:16px}
    .card{background:white;padding:14px;border-radius:12px;box-shadow:0 8px 24px rgba(2,6,23,0.06)}
    h2{margin:0 0 8px;font-size:18px}
    label{display:block;margin-top:8px;font-size:13px;color:var(--muted)}
    input,select,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid #e6eef6;margin-top:6px}
    .row{display:flex;gap:8px}
    .btn{background:var(--accent);color:white;padding:8px 12px;border:0;border-radius:8px;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(14,165,164,0.15)}
    .hover-btn{display:inline-block;padding:8px 12px;border-radius:8px;border:1px solid #e6eef6;background:white;transition:transform .15s,box-shadow .15s;cursor:pointer}
    .hover-btn:hover{transform:translateY(-4px);box-shadow:0 8px 18px rgba(2,6,23,0.08)}
    .small{font-size:12px;color:var(--muted)}
    .pill{padding:6px 8px;border-radius:999px;background:#f1f5f9;font-weight:700}
    .chart-wrap{height:220px}
    .prescription, .diet {margin-top:12px;padding:10px;border-radius:8px;background:#fbfdff;border:1px solid #eef7f6}
    .prescription pre{white-space:pre-wrap;margin:0}
    .note{font-size:13px;color:#7c2d12;background:#fff4f2;padding:8px;border-radius:8px;margin-top:10px}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}

    /* tooltip */
    .tooltip {position:relative;display:inline-block}
    .tooltip .tooltiptext{visibility:hidden;width:210px;background:#0f172a;color:#fff;text-align:left;border-radius:8px;padding:8px;position:absolute;z-index:1;bottom:120%;left:50%;transform:translateX(-50%);opacity:0;transition:opacity .12s}
    .tooltip:hover .tooltiptext{visibility:visible;opacity:1}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">PHA</div>
        <div>
          <div style="font-weight:700">Personal Healthcare Assistant</div>
          <div class="small">Pregnancy, Diabetes & Oncology — assistance dashboard</div>
        </div>
      </div>
      <div class="small">Note: not a substitute for clinical judgement</div>
    </header>

    <div class="grid">
      <div>
        <div class="card">
          <h2>1) Prescription & Dietary Recommendation — Pregnant Woman</h2>
          <div class="small">Enter basic patient info and press <b>Generate</b></div>

          <label>Patient name</label>
          <input id="preg_name" placeholder="Name">

          <div class="row">
            <div style="flex:1">
              <label>Age (years)</label>
              <input id="preg_age" type="number" min="12" max="60" value="28">
            </div>
            <div style="flex:1">
              <label>Trimester</label>
              <select id="preg_trimester">
                <option value="1">1st trimester (0-13 wk)</option>
                <option value="2">2nd trimester (14-27 wk)</option>
                <option value="3">3rd trimester (28+ wk)</option>
              </select>
            </div>
          </div>

          <label>Allergies / Notes</label>
          <input id="preg_allergy" placeholder="e.g. dairy allergy, vegetarian...">

          <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
            <button class="btn" onclick="generatePregnancy()">Generate Recommendations</button>
            <div class="hover-btn tooltip" onclick="copyText('preg_output')">Copy Output
              <div class="tooltiptext">Click to copy generated text</div>
            </div>
            <div class="small" style="margin-left:auto">Source: WHO & NHS suggested patterns</div>
          </div>

          <div id="preg_output" class="diet" style="margin-top:12px;min-height:70px">No recommendations yet.</div>

          <div class="note">Medical disclaimer: This tool provides general dietary guidance. Prescription medications and dosages must be decided by a licensed clinician. See references in the info panel.</div>
        </div>

        <div style="height:14px"></div>

        <div class="card">
          <h2>2) Tumor / Diabetes — Patient Summary & Suggested Care Pathway</h2>
          <div class="small">Use this module to record key metrics and view suggested next steps (informational)</div>

          <label>Patient name</label>
          <input id="onc_name" placeholder="Name">

          <div class="row">
            <div style="flex:1">
              <label>Condition</label>
              <select id="onc_condition">
                <option value="diabetes">Diabetes</option>
                <option value="tumor">Tumour / Oncology</option>
              </select>
            </div>
            <div style="flex:1">
              <label>Age</label>
              <input id="onc_age" type="number" value="55">
            </div>
          </div>

          <label>Key metrics (comma separated)</label>
          <input id="onc_metrics" placeholder="e.g. HbA1c:7.8%, FBG:145 mg/dL">

          <div style="margin-top:10px;display:flex;gap:8px">
            <button class="btn" onclick="generateOncologyOrDiabetes()">Generate Plan</button>
            <button class="btn ghost" onclick="clearOnc()">Clear</button>
            <div class="small" style="margin-left:auto">See ADA & NCCN / NCI for guidelines</div>
          </div>

          <div id="onc_output" class="prescription">No plan yet.</div>

          <div class="note">Clinical caution: Oncology treatments are highly specialised and depend on tumour type & staging. Diabetes medication choices and insulin dosing must be individualized by clinicians. This panel gives high-level suggestions only.</div>
        </div>
      </div>

      <aside>
        <div class="card">
          <h2>Vitals & Charts</h2>
          <div class="small">Visualize weight gain or glucose trends</div>
          <div style="height:12px"></div>

          <div class="chart-wrap">
            <canvas id="glucoseChart"></canvas>
          </div>
          <div style="height:12px"></div>

          <div class="chart-wrap">
            <canvas id="weightChart"></canvas>
          </div>
        </div>

        <div style="height:12px"></div>

        <div class="card">
          <h2>Quick Actions</h2>
          <div style="display:flex;flex-direction:column;gap:8px">
            <button class="hover-btn" onclick="addSampleData()"><i class="fa-solid fa-plus"></i> Add sample glucose points</button>
            <button class="hover-btn" onclick="downloadReport()"><i class="fa-solid fa-file-export"></i> Export Patient Summary</button>
            <button class="hover-btn" onclick="showReferences()"><i class="fa-solid fa-book-open"></i> View Key References</button>
          </div>
        </div>

        <div style="height:12px"></div>

        <div class="card">
          <h2>References</h2>
          <div class="small">Authoritative sources used (open in new tab):</div>
          <ul class="small">
            <li>WHO — Maternal nutrition & pregnancy advice</li>
            <li>NHS — Pregnancy diet & foods to avoid</li>
            <li>ADA — Standards of Care in Diabetes (summary)</li>
            <li>NCI / NCCN — Oncology treatment overviews</li>
          </ul>
        </div>
      </aside>
    </div>

  </div>

  <script>
    // -- Helpers
    function copyText(id){
      const el = document.getElementById(id);
      const text = el.innerText || el.textContent;
      navigator.clipboard?.writeText(text).then(()=>alert('Copied to clipboard'));
    }

    // -- Pregnancy generator (non-prescription, dietary advice only)
    function generatePregnancy(){
      const name = document.getElementById('preg_name').value || 'Patient';
      const age = document.getElementById('preg_age').value;
      const tri = document.getElementById('preg_trimester').value;
      const allergy = document.getElementById('preg_allergy').value || 'None noted';

      const triLabel = tri==='1'? '1st (0–13 wk)' : tri==='2'? '2nd (14–27 wk)' : '3rd (28+ wk)';

      // Dietary high-level suggestions based on trimester — simplified from WHO/NHS patterns
      let calories = tri==='1'? '+0 to +200 kcal/day' : tri==='2'? '+340 kcal/day' : '+450 kcal/day';
      let protein = 'Aim for ~1.1 g/kg/day (increase protein-rich foods)';
      let iron = 'Ensure adequate iron — consider 30–60 mg elemental iron if advised by clinician';
      let folic = 'Folic acid supplement (400–800 µg) per local guidance';

      let foodsAvoid = ['Unpasteurised dairy','Raw/undercooked eggs & meat','High-mercury fish (shark, swordfish)','Alcohol (avoid)'];

      const out = `Recommendations for ${name} (Age: ${age}, Trimester: ${triLabel})\n\nDietary guidance (high level):\n- Extra energy: ${calories}\n- Protein: ${protein}\n- Key micronutrients: ${iron}; ${folic}\n- Eat a variety of vegetables, fruits, whole grains, lean proteins, pulses, and dairy (if tolerated).\n- Limit sugary drinks & excessive processed foods.\n\nFoods to avoid or be cautious with:\n- ${foodsAvoid.join(', ')}\n\nAllergies / notes: ${allergy}\n\nMedical note: For medication prescriptions (e.g., iron therapy, antiemetics) and specific dosing, consult a clinician. This tool provides general dietary patterns only.`;

      document.getElementById('preg_output').innerText = out;

      // update weight chart with a suggested trajectory (demo)
      const weights = tri==='1'? [55,55.5,56]: tri==='2'? [56,57.5,59,60.5]: [60,61.5,63,64.5];
      updateWeightChart(weights);
    }

    // -- Oncology / Diabetes generator (informational only)
    function generateOncologyOrDiabetes(){
      const name = document.getElementById('onc_name').value || 'Patient';
      const cond = document.getElementById('onc_condition').value;
      const age = document.getElementById('onc_age').value;
      const metrics = document.getElementById('onc_metrics').value || 'No metrics provided';

      let out = `Summary for ${name} (Age: ${age})\nCondition: ${cond.toUpperCase()}\nMetrics: ${metrics}\n\n`;

      if(cond==='diabetes'){
        out += `High-level management suggestions (informational):\n- Lifestyle: diet (carb-counting, reduce sugary drinks), physical activity, weight optimization.\n- Monitoring: regular blood glucose monitoring; aim and targets should be individualised.\n- Medication categories commonly used: Metformin, SGLT2 inhibitors, DPP-4 inhibitors, GLP-1 receptor agonists, and insulin for advanced cases.\n- If pregnant or planning pregnancy, manage per specialized pregnancy diabetes guidance.\n\nClinical note: Medication choice, dosing and targets must be decided by the treating physician following ADA Standards of Care.`;
      } else {
        out += `Oncology (tumour) — informational pathway: \n- Important: diagnosis, histology, staging (TNM) guide therapy choices.\n- Possible treatment options: surgery, radiation, systemic therapy (chemotherapy, targeted therapy, immunotherapy) depending on tumour type & stage.\n- Supportive care: antiemetics, growth factor support, symptom management are essential.\n\nClinical note: Oncology treatments are complex; refer to oncology specialist and use NCCN/NCI guidance for tumour-specific regimens.`;
      }

      document.getElementById('onc_output').innerText = out;

      // if diabetes, add sample glucose points
      if(cond==='diabetes') addSampleData();
    }

    function clearOnc(){ document.getElementById('onc_name').value=''; document.getElementById('onc_metrics').value=''; document.getElementById('onc_output').innerText='No plan yet.'; }

    // -- Charts
    const glucoseCtx = document.getElementById('glucoseChart').getContext('2d');
    const weightCtx = document.getElementById('weightChart').getContext('2d');

    let glucoseChart = new Chart(glucoseCtx,{type:'line',data:{labels:['Day 1','Day 2','Day 3','Day 4','Day 5'],datasets:[{label:'Glucose (mg/dL)',data:[120,135,140,128,130],fill:false,borderWidth:2}]},options:{responsive:true,plugins:{legend:{display:true}}}});

    let weightChart = new Chart(weightCtx,{type:'line',data:{labels:['Week 1','Week 4','Week 8','Week 12'],datasets:[{label:'Weight (kg)',data:[60,61,62,63],fill:false,borderWidth:2}]},options:{responsive:true,plugins:{legend:{display:true}}}});

    function addSampleData(){
      const arr = glucoseChart.data.datasets[0].data;
      arr.push(110 + Math.floor(Math.random()*60));
      glucoseChart.data.labels.push('D'+(glucoseChart.data.labels.length+1));
      glucoseChart.update();
    }

    function updateWeightChart(weights){
      weightChart.data.datasets[0].data = weights;
      weightChart.data.labels = weights.map((_,i)=>`T${i+1}`);
      weightChart.update();
    }

    function downloadReport(){
      const preg = document.getElementById('preg_output').innerText;
      const onc = document.getElementById('onc_output').innerText;
      const txt = `Personal Healthcare Assistant\n\nPREGNANCY OUTPUT:\n${preg}\n\nONCOLOGY/DIABETES OUTPUT:\n${onc}`;
      const blob = new Blob([txt],{type:'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download='patient_summary.txt'; a.click(); URL.revokeObjectURL(url);
    }

    function showReferences(){
      const txt = `References:\n- WHO: Maternal nutrition & pregnancy guidance\n- NHS: Pregnancy diet and foods to avoid\n- ADA: Standards of Care in Diabetes (annual)\n- NCI / NCCN: Oncology guidelines`;
      alert(txt);
    }
  </script>
</body>
</html>
